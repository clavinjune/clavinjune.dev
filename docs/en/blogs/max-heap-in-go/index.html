<!doctype html><html lang=en>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatbile content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Clavin June">
<meta http-equiv=content-security-policy content="default-src 'self' 'unsafe-inline' https:; object-src 'none'; style-src 'self' 'unsafe-inline' fonts.googleapis.com github.githubassets.com; font-src fonts.gstatic.com; script-src 'self' 'unsafe-inline' www.googletagmanager.com gist.github.com giscus.app; base-uri 'none'; img-src 'self' images.unsplash.com i.kym-cdn.com iq.opengenus.org;">
<meta name=google-site-verification content="n8iUJq2zr7wQ8eTS_ozpypgZQhfezUeUOXhOr3-INrE">
<meta name=monetization content="$ilp.uphold.com/RYNmdxrFrPJB">
<link rel=me href=mailto:juneardoc@gmail.com>
<link rel=pingback href=https://webmention.io/clavinjune.dev_en_/xmlrpc>
<link rel=webmention href=https://webmention.io/clavinjune.dev_en_/webmention>
<meta name=description content="This post contains my own experiences in reviewing my knowledge of Max / Min Heap data structure">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="June Personal Web">
<meta property="og:title" content="Max Heap in Go">
<meta property="og:description" content="This post contains my own experiences in reviewing my knowledge of Max / Min Heap data structure">
<meta property="og:type" content="article">
<meta property="og:url" content="https://clavinjune.dev/en/blogs/max-heap-in-go/"><meta property="og:image" content="https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?w=1920&q=50"><meta property="article:section" content="blogs">
<meta property="article:published_time" content="2021-01-16T00:00:00+07:00">
<meta property="article:modified_time" content="2021-01-16T00:00:00+07:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?w=1920&q=50">
<meta name=twitter:title content="Max Heap in Go">
<meta name=twitter:description content="This post contains my own experiences in reviewing my knowledge of Max / Min Heap data structure">
<title>June Personal Web - Max Heap in Go</title>
<link rel=stylesheet href="/css/style.min.caf3859664f2f17538a5252c2da2fafd55c3c16af6cf7edc370e96f06f065494.css" integrity="sha256-yvOFlmTy8XU4pSUsLaL6/VXDwWr2z37cNw6W8G8GVJQ=">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap">
</noscript>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap">
</noscript>
<link rel=stylesheet href="/css/single.min.64240b89963babc78945279025eab5a935a4038b0c75d1113d3a42e920ae59b4.css" integrity="sha256-ZCQLiZY7q8eJRSeQJeq1qTWkA4sMddERPTpC6SCuWbQ=">
</head>
<body><nav class=fg-bold>
<a id=skip-to-content href=#content>Skip to content</a>
<ul id=menu><li><a href=https://clavinjune.dev/en/>HOME</a></li><li><a class=active href=https://clavinjune.dev/en/blogs/>BLOG</a></li></ul>
</nav>
<main class=single>
<h1 class=title>Max Heap in Go</h1>
<div class="metadata font-16">
<a class=category href=https://clavinjune.dev/en/categories/tech>tech</a>
<span class=middot>&#183;</span>
<span>Jan 16, 2021</span>
<span class=middot>&#183;</span>
<span>~8 min</span>
</div>
<div id=content>
<figure>
<img srcset="https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=240 240w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=300 300w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=360 360w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=480 480w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=768 768w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=800 800w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=960 960w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1024 1024w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1080 1080w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1200 1200w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1366 1366w,https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1920 1920w" sizes="(max-width: 480px) 480px, 100vw" src="https://images.unsplash.com/photo-1532543307581-8b01a7ff954f?fm=webp&q=50&w=1920" alt="Photo by @freestocks on Unsplash" title="Photo by @freestocks on Unsplash" width=100% height=auto>
<figcaption class=font-16>Photo by <a class="link unsplash-ref" rel="noreferrer nofollow noopener" target=_blank href=https://unsplash.com/@freestocks>@freestocks</a> on Unsplash</figcaption>
</figure>
<p>Same as the case <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://clavinjune.dev/en/blogs/binary-search-tree-in-go/>here</a>, I just wanted to revisit another data structure. Well, Max Heap (also Min Heap) is a data structure that commonly used to create a priority queue which also a complete binary tree that has nodes which value is greater (or lesser) than its children value.</p>
<p>Not like BST that I implemented before, Max Heap commonly implemented using array in order to make it easier (I think) to access its children. To accessing each nodes parent or children you can visualize the whole array as a tree. I have no image for it, so I pick Max Heap image from another website. The concept is the same with Min Heap tho.</p>
<p><figure>
<img src=https://iq.opengenus.org/content/images/2019/06/Max-Heap.png alt="Photo by opengenus.org" title="Photo by opengenus.org" width=100% height=auto>
<figcaption>Photo by opengenus.org</figcaption>
</figure></p>
<p>Finally we start array from 1 (LOL). Why we start from 1? Because index 0 couldn&rsquo;t be accessed by this formula.</p>
<p>Refer to the provided image above, we can visualize that left child of a node is on the <code>currentIndex * 2</code>, the right child is on the <code>currentIndex * 2 + 1</code>, and you can access the parent of the node by using <code>currentIndex / 2</code>.</p>
<p>For example, Node with value <code>15</code>, has 2 children which are <code>10</code> and <code>5</code>. You can see the index of <code>15</code> which is <code>3</code>. Its left child is <code>10</code> which has index <code>3 * 2 = 6</code>, and its right children is <code>5</code> which has index <code>3 * 2 + 1 = 7</code>.</p>
<p>Enough with the theory, you can read it from your book. I only want to write the implementation here using Go. I only implement <code>Push</code>, <code>Pop</code>, and <code>Peek</code> operation. It&rsquo;s hard to decide the name of the operation, but as long as it describes the operation please don&rsquo;t mind.</p>
<h2 id=define-maxheap-struct>Define MaxHeap Struct</h2>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>type</span> MaxHeap <span style=color:#00f>struct</span> {
  heap     []<span style=color:#2b91af>int</span>
  capacity <span style=color:#2b91af>int</span>
  size     <span style=color:#2b91af>int</span>
  root     <span style=color:#2b91af>int</span>
}
</code></pre></td></tr></table>
</div>
</div><p>MaxHeap will have at least size, capacity, and heap itself. <code>root</code> attribute will be <code>constant</code> since its root should always be <code>1</code>. <code>size</code> will define the current size of the heap, <code>capacity</code> will define how much the heap can store data, and the <code>heap</code> itself is an array that we stored the data into.</p>
<h2 id=constructor>Constructor</h2>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> NewMaxHeap(capacity <span style=color:#2b91af>int</span>) *MaxHeap {
  <span style=color:green>// because we used the 0 index
</span><span style=color:green></span>  <span style=color:green>// we need to increase the capacity defined by user
</span><span style=color:green></span>  c := capacity + 1
  h := make([]<span style=color:#2b91af>int</span>, c, c)

  <span style=color:green>// just to mark that it is the minimum one,
</span><span style=color:green></span>  <span style=color:green>// you can ignore this
</span><span style=color:green></span>  h[0] = (1 &lt;&lt; 31) - 1

  <span style=color:#00f>return</span> &amp;MaxHeap{
    root:     1, <span style=color:green>// always 1, you can omit this attribute
</span><span style=color:green></span>    size:     0,
    capacity: c,
    heap:     h,
  }
}
</code></pre></td></tr></table>
</div>
</div><h2 id=helper-method>Helper Method</h2>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> (MaxHeap) getParent(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx / 2
}

<span style=color:#00f>func</span> (MaxHeap) getLeft(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx * 2
}

<span style=color:#00f>func</span> (MaxHeap) getRight(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx*2 + 1
}

<span style=color:#00f>func</span> (m *MaxHeap) swap(idx1, idx2 <span style=color:#2b91af>int</span>) {
  m.heap[idx1], m.heap[idx2] = m.heap[idx2], m.heap[idx1]
}

<span style=color:#00f>func</span> (m MaxHeap) String() <span style=color:#2b91af>string</span> {
  <span style=color:#00f>return</span> fmt.Sprintf(<span style=color:#a31515>`size:     %v
</span><span style=color:#a31515>capacity: %v
</span><span style=color:#a31515>heap:     %v`</span>,
    m.size, m.capacity-1, m.heap[1:])
}
</code></pre></td></tr></table>
</div>
</div><h2 id=push>Push</h2>
<p>Push into max / min heap should be easy, just put the element where it belongs according to the index, and check if its value is greater / lesser than its parent, if you&rsquo;re implementing max heap, check whether its value is greater than its parent, if so swap its value with its parent value.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> (m *MaxHeap) Push(element <span style=color:#2b91af>int</span>) {
  <span style=color:green>// check whether it can store the element
</span><span style=color:green></span>  <span style=color:#00f>if</span> m.size &gt;= m.capacity-1 {
    <span style=color:#00f>return</span>
  }

  m.size++
  idx := m.size

  <span style=color:green>// put it according to the index
</span><span style=color:green></span>  m.heap[idx] = element

  parent := m.getParent(idx)
  
  <span style=color:green>// check if its value is greater than its parent
</span><span style=color:green></span>  <span style=color:#00f>for</span> m.heap[idx] &gt; m.heap[parent] {
    <span style=color:green>// then swap
</span><span style=color:green></span>    m.swap(idx, parent)

    <span style=color:green>// repeat the process until
</span><span style=color:green></span>    <span style=color:green>// the greatest value is on the top
</span><span style=color:green></span>    idx = parent
    parent = m.getParent(idx)
  }
}
</code></pre></td></tr></table>
</div>
</div><h2 id=peek>Peek</h2>
<p>Peek operation will return the greatest / least value which is the root.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> (m MaxHeap) Peek() (<span style=color:#2b91af>int</span>, <span style=color:#2b91af>error</span>) {
  <span style=color:#00f>if</span> m.size &lt;= 0 {
    <span style=color:#00f>return</span> (1 &lt;&lt; 31) - 1, fmt.Errorf(<span style=color:#a31515>&#34;max-heap: heap is empty&#34;</span>)
  }

  <span style=color:#00f>return</span> m.heap[m.root], <span style=color:#00f>nil</span>
}
</code></pre></td></tr></table>
</div>
</div><p>Let&rsquo;s check our heap</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> main() {
  h := NewMaxHeap(15)
  h.Push(1)
  h.Push(4)
  h.Push(2)
  h.Push(5)

  fmt.Println(h)
  g, _ := h.Peek()
  fmt.Println(<span style=color:#a31515>&#34;greatest:&#34;</span>, g)
}
</code></pre></td></tr></table>
</div>
</div><p>The output should be like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>size:     4
capacity: 15
heap:     [5 4 2 1 0 0 0 0 0 0 0 0 0 0 0]
greatest: 5
</code></pre></td></tr></table>
</div>
</div><h2 id=pop>Pop</h2>
<p>Now let&rsquo;s pop something. Popping operation will return value of the greatest / least value and delete it from the heap. We need to rebalance the heap So the greatest / least value will be the root again.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>func</span> (m *MaxHeap) rebalance(idx <span style=color:#2b91af>int</span>) {
  <span style=color:green>// don&#39;t rebalance if node index
</span><span style=color:green></span>  <span style=color:green>// is greater than heap size
</span><span style=color:green></span>  <span style=color:#00f>if</span> idx &gt;= m.size {
    <span style=color:#00f>return</span>
  }

  <span style=color:green>// fetch the left child index
</span><span style=color:green></span>  left := m.getLeft(idx)

  <span style=color:green>// fetch the right child index
</span><span style=color:green></span>  right := m.getRight(idx)

  <span style=color:green>// only swap if children position is wrong
</span><span style=color:green></span>  <span style=color:green>// and only the children index is less than heap size
</span><span style=color:green></span>  <span style=color:green>// and then rebalance it
</span><span style=color:green></span>  <span style=color:#00f>if</span> left &lt;= m.size {
    <span style=color:#00f>if</span> m.heap[idx] &lt; m.heap[left] {
      m.swap(idx, left)
      m.rebalance(left)
    }
  }

  <span style=color:#00f>if</span> right &lt;= m.size {
    <span style=color:#00f>if</span> m.heap[idx] &lt; m.heap[right] {
      m.swap(idx, right)
      m.rebalance(right)
    }
  }
}

<span style=color:#00f>func</span> (m *MaxHeap) Pop() (<span style=color:#2b91af>int</span>, <span style=color:#2b91af>error</span>) {
  <span style=color:#00f>if</span> m.size &lt;= 0 {
    <span style=color:#00f>return</span> (1 &lt;&lt; 31) - 1, fmt.Errorf(<span style=color:#a31515>&#34;max-heap: heap is empty&#34;</span>)
  }

  <span style=color:green>// fetch the root
</span><span style=color:green></span>  max := m.heap[m.root]
  <span style=color:green>// make the route is the last element in the heap
</span><span style=color:green></span>  m.heap[m.root] = m.heap[m.size]
  <span style=color:green>// make it zero value
</span><span style=color:green></span>  m.heap[m.size] = 0
  <span style=color:green>// decrease the size so the zero value won&#39;t be counted
</span><span style=color:green></span>  m.size--

  <span style=color:green>// rebalance the heap
</span><span style=color:green></span>  m.rebalance(m.root)

  <span style=color:green>// return the greatest
</span><span style=color:green></span>  <span style=color:#00f>return</span> max, <span style=color:#00f>nil</span>
}
</code></pre></td></tr></table>
</div>
</div><p>So whenever Pop operation is called, the heap will rebalance it from the top until its leaf. The whole code should be look like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>package</span> main

<span style=color:#00f>import</span> <span style=color:#a31515>&#34;fmt&#34;</span>

<span style=color:#00f>type</span> MaxHeap <span style=color:#00f>struct</span> {
  heap     []<span style=color:#2b91af>int</span>
  capacity <span style=color:#2b91af>int</span>
  size     <span style=color:#2b91af>int</span>
  root     <span style=color:#2b91af>int</span>
}

<span style=color:#00f>func</span> (MaxHeap) getParent(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx / 2
}

<span style=color:#00f>func</span> (MaxHeap) getLeft(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx * 2
}

<span style=color:#00f>func</span> (MaxHeap) getRight(idx <span style=color:#2b91af>int</span>) <span style=color:#2b91af>int</span> {
  <span style=color:#00f>return</span> idx*2 + 1
}

<span style=color:#00f>func</span> (m *MaxHeap) swap(idx1, idx2 <span style=color:#2b91af>int</span>) {
  m.heap[idx1], m.heap[idx2] = m.heap[idx2], m.heap[idx1]
}

<span style=color:#00f>func</span> (m MaxHeap) String() <span style=color:#2b91af>string</span> {
  <span style=color:#00f>return</span> fmt.Sprintf(<span style=color:#a31515>`size:     %v
</span><span style=color:#a31515>capacity: %v
</span><span style=color:#a31515>heap:     %v`</span>,
    m.size, m.capacity-1, m.heap[1:])
}

<span style=color:#00f>func</span> (m *MaxHeap) rebalance(idx <span style=color:#2b91af>int</span>) {
  <span style=color:#00f>if</span> idx &gt;= m.size {
    <span style=color:#00f>return</span>
  }

  left := m.getLeft(idx)
  right := m.getRight(idx)

  <span style=color:#00f>if</span> left &lt;= m.size {
    <span style=color:#00f>if</span> m.heap[idx] &lt; m.heap[left] {
      m.swap(idx, left)
      m.rebalance(left)
    }
  }

  <span style=color:#00f>if</span> right &lt;= m.size {
    <span style=color:#00f>if</span> m.heap[idx] &lt; m.heap[right] {
      m.swap(idx, right)
      m.rebalance(right)
    }
  }
}

<span style=color:#00f>func</span> (m *MaxHeap) Pop() (<span style=color:#2b91af>int</span>, <span style=color:#2b91af>error</span>) {
  <span style=color:#00f>if</span> m.size &lt;= 0 {
    <span style=color:#00f>return</span> (1 &lt;&lt; 31) - 1, fmt.Errorf(<span style=color:#a31515>&#34;max-heap: heap is empty&#34;</span>)
  }

  <span style=color:green>// fetch the root
</span><span style=color:green></span>  max := m.heap[m.root]
  <span style=color:green>// make the route is the last element in the heap
</span><span style=color:green></span>  m.heap[m.root] = m.heap[m.size]
  <span style=color:green>// make it zero value
</span><span style=color:green></span>  m.heap[m.size] = 0
  <span style=color:green>// decrease the size so the zero value won&#39;t be counted
</span><span style=color:green></span>  m.size--

  <span style=color:green>// rebalance the heap
</span><span style=color:green></span>  m.rebalance(m.root)

  <span style=color:green>// return the greatest
</span><span style=color:green></span>  <span style=color:#00f>return</span> max, <span style=color:#00f>nil</span>
}

<span style=color:#00f>func</span> (m MaxHeap) Peek() (<span style=color:#2b91af>int</span>, <span style=color:#2b91af>error</span>) {
  <span style=color:#00f>if</span> m.size &lt;= 0 {
    <span style=color:#00f>return</span> (1 &lt;&lt; 31) - 1, fmt.Errorf(<span style=color:#a31515>&#34;max-heap: heap is empty&#34;</span>)
  }

  <span style=color:#00f>return</span> m.heap[m.root], <span style=color:#00f>nil</span>
}

<span style=color:#00f>func</span> (m *MaxHeap) Push(element <span style=color:#2b91af>int</span>) {
  <span style=color:green>// exceed the limit
</span><span style=color:green></span>  <span style=color:#00f>if</span> m.size &gt;= m.capacity-1 {
    <span style=color:#00f>return</span>
  }

  m.size++
  idx := m.size

  m.heap[idx] = element

  parent := m.getParent(idx)

  <span style=color:#00f>for</span> m.heap[idx] &gt; m.heap[parent] {
    m.swap(idx, parent)

    idx = parent
    parent = m.getParent(idx)
  }
}

<span style=color:#00f>func</span> NewMaxHeap(capacity <span style=color:#2b91af>int</span>) *MaxHeap {
  <span style=color:green>// because we used the 0 index
</span><span style=color:green></span>  <span style=color:green>// we need to increase the capacity defined by user
</span><span style=color:green></span>  c := capacity + 1
  h := make([]<span style=color:#2b91af>int</span>, c, c)

  <span style=color:green>// just to mark that it is the minimum one,
</span><span style=color:green></span>  <span style=color:green>// you can ignore this
</span><span style=color:green></span>  h[0] = (1 &lt;&lt; 31) - 1

  <span style=color:#00f>return</span> &amp;MaxHeap{
    root:     1, <span style=color:green>// always 1, you can omit this attribute
</span><span style=color:green></span>    size:     0,
    capacity: c,
    heap:     h,
  }
}

<span style=color:#00f>func</span> main() {
  h := NewMaxHeap(15)
  h.Push(1)
  h.Push(4)
  h.Push(2)
  h.Push(5)
  h.Push(3)
  h.Push(10)

  fmt.Println(h.Pop())
  fmt.Println(h.Pop())
  fmt.Println(h.Pop())
  h.Push(11)

  fmt.Println(h)
}
</code></pre></td></tr></table>
</div>
</div><p>Thank you for reading!</p>
</div>
<div class=separator>
<span>&#183;</span>
<span>&#183;</span>
<span>&#183;</span>
</div>
<h2 class=subtitle>Love This Content?</h2>
<div class="fg-light support-me">Any kind of supports is greatly appreciated! Kindly support me via <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://www.blockchain.com/btc/address/17Afj6o7xm3ZxQ38adnvSFHSBKhHiCDiev>Bitcoin</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://ko-fi.com/clavinjune>Ko-fi</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://trakteer.id/clavinjune>Trakteer</a>, or just continue to read another content. You can write a response via <a class="fg-bold bottom-red" rel="noreferrer nofollow noopener" href=https://webmention.io/ target=_blank>Webmention</a> and let me know the URL via <a class="fg-bold bottom-red" rel="noreferrer nofollow noopener" href=https://telegraph.p3k.io/send-a-webmention target=_blank>Telegraph</a>.</div><div id=webmentions></div>
<script defer type=text/javascript src=https://clavinjune.dev/js/webmention.js></script>
</main>
<script type=text/javascript src=https://clavinjune.dev/js/ga.js defer></script>
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-MTSJ0LHJ06"></script><footer>
Copyright &copy; 2022 &#183; Clavin June
</footer>
<script defer type=text/javascript src=https://clavinjune.dev/js/copy.js></script>
</body>
</html>