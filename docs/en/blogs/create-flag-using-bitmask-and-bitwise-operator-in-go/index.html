<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatbile content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Clavin June"><meta http-equiv=content-security-policy content="default-src 'self' 'unsafe-inline' https:; object-src 'none'; style-src 'self' 'unsafe-inline' fonts.googleapis.com github.githubassets.com; font-src fonts.gstatic.com; script-src 'self' 'unsafe-inline' www.googletagmanager.com gist.github.com giscus.app static.cloudflareinsights.com; base-uri 'none'; img-src 'self' images.unsplash.com i.kym-cdn.com iq.opengenus.org;"><meta name=google-site-verification content="n8iUJq2zr7wQ8eTS_ozpypgZQhfezUeUOXhOr3-INrE"><meta name=monetization content="$ilp.uphold.com/RYNmdxrFrPJB"><link rel=me href=mailto:juneardoc@gmail.com><link rel=pingback href=https://webmention.io/clavinjune.dev_en_/xmlrpc><link rel=webmention href=https://webmention.io/clavinjune.dev_en_/webmention><meta name=description content="create flag using bitmask and bitwise operator in go"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="June Personal Web"><meta property="og:title" content="Create Flag Using Bitmask and Bitwise Operator in Go"><meta property="og:description" content="create flag using bitmask and bitwise operator in go"><meta property="og:type" content="article"><meta property="og:url" content="https://clavinjune.dev/en/blogs/create-flag-using-bitmask-and-bitwise-operator-in-go/"><meta property="og:image" content="https://images.unsplash.com/photo-1569605803663-e9337d901ff9?w=1920&q=50"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2022-07-15T11:23:00+07:00"><meta property="article:modified_time" content="2022-07-15T11:23:00+07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1569605803663-e9337d901ff9?w=1920&q=50"><meta name=twitter:title content="Create Flag Using Bitmask and Bitwise Operator in Go"><meta name=twitter:description content="create flag using bitmask and bitwise operator in go"><title>June Personal Web - Create Flag Using Bitmask and Bitwise Operator in Go</title><link rel=stylesheet href=https://clavinjune.dev/css/style.min.896a9b28dba5a8078d3751b90faf73715894e2373c5c5594ab084cc33d6d4527.css integrity="sha256-iWqbKNulqAeNN1G5D69zcViU4jc8XFWUqwhMwz1tRSc="><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap"></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap"></noscript><link rel=stylesheet href=https://clavinjune.dev/css/single.min.e8889c0752ac6ca9337cbb89ec2e249a2f3effd2a56faa77f8307f247d2433dd.css integrity="sha256-6IicB1KsbKkzfLuJ7C4kmi8+/9Klb6p3+DB/JH0kM90="></head><body><nav class=fg-bold><a id=skip-to-content href=#content>Skip to content</a><ul id=menu><li><a href=https://clavinjune.dev/en/>HOME</a></li><li><a class=active href=https://clavinjune.dev/en/blogs/>BLOG</a></li></ul></nav><main class=single><h1 class=title>Create Flag Using Bitmask and Bitwise Operator in Go</h1><div class="metadata font-16"><a class=category href=https://clavinjune.dev/en/categories/tech>tech</a>
<span class=middot>&#183;</span>
<span>Jul 15, 2022</span>
<span class=middot>&#183;</span>
<span>~5 min</span></div><div id=content><figure><div class=img-box><img srcset="https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=240 240w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=300 300w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=360 360w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=480 480w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=600 600w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=768 768w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=800 800w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=960 960w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1024 1024w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1080 1080w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1200 1200w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1366 1366w,https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1920 1920w" sizes="(max-width: 200px) 200px, 100vw" src="https://images.unsplash.com/photo-1569605803663-e9337d901ff9?fm=webp&q=50&w=1920" alt="Photo by @swimstaralex on Unsplash" title="Photo by @swimstaralex on Unsplash"></div><figcaption class=font-16>Photo by <a class="link unsplash-ref" rel="noreferrer nofollow noopener" target=_blank href=https://unsplash.com/@swimstaralex>@swimstaralex</a> on Unsplash</figcaption></figure><h2 id=introduction>Introduction</h2><p>I revisit some of my college notes, and find that in my first year of college, in Algorithm and Programming Course, Bitwise operator was mentioned but wasn&rsquo;t highlighted. It&rsquo;s either I didn&rsquo;t write the notes on that specific topic (<em>I stopped writing notes in my second semester</em>) or the Lecturer didn&rsquo;t explain anything about the usage. But then I found it is quite useful for Bitmasking. For example, in Unix&rsquo; file access control it uses bitmask to represent the access:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>000 =&gt; 0 =&gt; can&#39;t access anything
</span></span><span style=display:flex><span>001 =&gt; 1 =&gt; can only execute
</span></span><span style=display:flex><span>010 =&gt; 2 =&gt; can only read
</span></span><span style=display:flex><span>011 =&gt; 3 =&gt; can execute+read
</span></span><span style=display:flex><span>100 =&gt; 4 =&gt; can only write
</span></span><span style=display:flex><span>101 =&gt; 5 =&gt; can execute+write
</span></span><span style=display:flex><span>110 =&gt; 6 =&gt; can read+write
</span></span><span style=display:flex><span>111 =&gt; 7 =&gt; can execute+read+write
</span></span></code></pre></td></tr></table></div></div><p>All of those combination can be construct with just only 3 bits. As you can see, Bitmask uses sets of bit to show specific access is given or not. If it is 0, means that specific access is not given, otherwise it is given. In this article, you will learn how to implement Bitmasking and its operation in Golang.</p><h2 id=code>Code</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#00f>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>import</span> <span style=color:#a31515>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>type</span> Permission <span style=color:#2b91af>uint8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>const</span> (
</span></span><span style=display:flex><span>	<span style=color:green>// 1
</span></span></span><span style=display:flex><span><span style=color:green></span>	PermissionExecute Permission = 1 &lt;&lt; <span style=color:#00f>iota</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:green>// 2
</span></span></span><span style=display:flex><span><span style=color:green></span>	PermissionRead
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:green>// 4
</span></span></span><span style=display:flex><span><span style=color:green></span>	PermissionWrite
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>const</span> (
</span></span><span style=display:flex><span>	PermissionAll = PermissionExecute | PermissionRead | PermissionWrite
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>func</span> Set(p, flag Permission) Permission {
</span></span><span style=display:flex><span>	<span style=color:#00f>return</span> p | flag
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>func</span> Clear(p, flag Permission) Permission {
</span></span><span style=display:flex><span>	<span style=color:#00f>return</span> p &amp;^ flag
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>func</span> HasAll(p, flag Permission) <span style=color:#2b91af>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#00f>return</span> p&amp;flag == flag
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>func</span> HasOneOf(p, flag Permission) <span style=color:#2b91af>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#00f>return</span> p&amp;flag != 0
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>func</span> main() {
</span></span><span style=display:flex><span>	<span style=color:#00f>var</span> p Permission
</span></span><span style=display:flex><span>    <span style=color:green>// you can use Set/Clear(p, PermissionExecute|PermissionRead|PermissionWrite) to set multiple bits
</span></span></span><span style=display:flex><span><span style=color:green></span>	p = Set(p, PermissionAll)
</span></span><span style=display:flex><span>	p = Clear(p, PermissionRead)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:green>// false, because PermissionRead is cleared
</span></span></span><span style=display:flex><span><span style=color:green></span>	hasExecuteAndRead := HasAll(p, PermissionExecute|PermissionRead)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:green>// true, because PermissionExecute and PermissionWrite are set
</span></span></span><span style=display:flex><span><span style=color:green></span>	hasExecuteAndWrite := HasAll(p, PermissionExecute|PermissionWrite)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:green>// true, because PermissionExecute is set even though PermissionRead is cleared
</span></span></span><span style=display:flex><span><span style=color:green></span>	hasExecuteOrRead := HasOneOf(p, PermissionExecute|PermissionRead)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	fmt.Println(hasExecuteAndRead, hasExecuteAndWrite, hasExecuteOrRead)
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Let&rsquo;s go to the explanation line per line.</p><h3 id=set>Set</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#00f>var</span> p Permission <span style=color:green>// has no permission 000
</span></span></span><span style=display:flex><span><span style=color:green></span>p = Set(p, PermissionAll) <span style=color:green>// set all permission 111
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// 000 (current permission)
</span></span></span><span style=display:flex><span><span style=color:green>// 111 (PermissionAll)
</span></span></span><span style=display:flex><span><span style=color:green>// --- OR
</span></span></span><span style=display:flex><span><span style=color:green>// 111
</span></span></span></code></pre></td></tr></table></div></div><h3 id=clear>Clear</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:green>// clear the bit of PermissionRead (010)
</span></span></span><span style=display:flex><span><span style=color:green></span>p = Clear(p, PermissionRead)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>// reverse the PermissionRead first
</span></span></span><span style=display:flex><span><span style=color:green>// 010
</span></span></span><span style=display:flex><span><span style=color:green>// ---- NOT
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (NOT result)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// 111 (current permission)
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (NOT result)
</span></span></span><span style=display:flex><span><span style=color:green>// --- AND
</span></span></span><span style=display:flex><span><span style=color:green>// 101
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>It is important to use BITCLEAR (AND NOT) operator instead of NOT (in this case, XOR) operator.
BITCLEAR is always set the bit to 0 because it reverse the flag first using NOT, then using AND.
Meanwhile, NOT is reverse the bit, so if you doing NOT operation twice, it will toggle back.
See the snippet below for example.</p></blockquote><h3 id=toggle-vs-clear>Toggle vs Clear</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:green>// toggling using NOT/XOR
</span></span></span><span style=display:flex><span><span style=color:green></span>foo := PermissionAll
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Set All %03b\n&#34;</span>, foo) <span style=color:green>// 111
</span></span></span><span style=display:flex><span><span style=color:green></span>foo ^= PermissionRead
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Toggle %03b\n&#34;</span>, foo) <span style=color:green>// 101
</span></span></span><span style=display:flex><span><span style=color:green></span>foo ^= PermissionRead
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Toggle %03b\n&#34;</span>, foo) <span style=color:green>// 111 it toggles back!
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// clearing using BITCLEAR
</span></span></span><span style=display:flex><span><span style=color:green></span>bar := PermissionAll
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Set All %03b\n&#34;</span>, bar) <span style=color:green>// 111
</span></span></span><span style=display:flex><span><span style=color:green></span>bar &amp;^= PermissionRead
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Clear %03b\n&#34;</span>, bar) <span style=color:green>// 101
</span></span></span><span style=display:flex><span><span style=color:green></span>bar &amp;^= PermissionRead
</span></span><span style=display:flex><span>fmt.Printf(<span style=color:#a31515>&#34;Clear %03b\n&#34;</span>, bar) <span style=color:green>// 101
</span></span></span></code></pre></td></tr></table></div></div><h3 id=hasall>HasAll</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:green>// check whether has both Execute AND Read permission
</span></span></span><span style=display:flex><span><span style=color:green></span>hasExecuteAndRead := HasAll(p, PermissionExecute|PermissionRead) <span style=color:green>// false
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// PermissionExecute|PermissionRead
</span></span></span><span style=display:flex><span><span style=color:green>// 001 (PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// 010 (PermissionRead)
</span></span></span><span style=display:flex><span><span style=color:green>// --- OR
</span></span></span><span style=display:flex><span><span style=color:green>// 011 (PermissionRead+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// check whether has both Execute AND Read permission
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (current permission)
</span></span></span><span style=display:flex><span><span style=color:green>// 011 (PermissionRead+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// --- AND
</span></span></span><span style=display:flex><span><span style=color:green>// 001 (PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// 001 != 011 so it doesn&#39;t have both Execute AND Read permission
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// check whether has both Execute AND Write permission
</span></span></span><span style=display:flex><span><span style=color:green></span>hasExecuteAndWrite := HasAll(p, PermissionExecute|PermissionWrite)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>// PermissionExecute|PermissionWrite
</span></span></span><span style=display:flex><span><span style=color:green>// 001 (PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// 100 (PermissionWrite)
</span></span></span><span style=display:flex><span><span style=color:green>// --- OR
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (Write+Execute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// check whether has both Execute AND Write permission
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (current permission)
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (PermissionWrite+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// --- AND
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (PermissionWrite+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// 101 == 101 so it has both Execute AND Write permission
</span></span></span></code></pre></td></tr></table></div></div><h3 id=hasoneof>HasOneOf</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:green>// check whether has either Execute OR Read permission
</span></span></span><span style=display:flex><span><span style=color:green></span>hasExecuteOrRead := HasOneOf(p, PermissionExecute|PermissionRead)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>// PermissionExecute|PermissionRead
</span></span></span><span style=display:flex><span><span style=color:green>// 001 (PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// 010 (PermissionRead)
</span></span></span><span style=display:flex><span><span style=color:green>// --- OR
</span></span></span><span style=display:flex><span><span style=color:green>// 011 (PermissionRead+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// check whether has either Execute OR Read permission
</span></span></span><span style=display:flex><span><span style=color:green>// 101 (current permission)
</span></span></span><span style=display:flex><span><span style=color:green>// 011 (PermissionRead+PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green>// --- AND
</span></span></span><span style=display:flex><span><span style=color:green>// 001 (PermissionExecute)
</span></span></span><span style=display:flex><span><span style=color:green></span>
</span></span><span style=display:flex><span><span style=color:green>// 001 != 0 so it has either Execute OR Read permission
</span></span></span></code></pre></td></tr></table></div></div><h2 id=things-to-be-concerned>Things To Be Concerned</h2><p>You can store the bitmasks on your databases also, but it might be not a good idea to use <code>iota</code> on your logic. From the code above, let&rsquo;s say you want to remove <code>PermissionRead</code>. Then <code>PermissionWrite</code> will be represented by 2 instead of 4. To avoid this, you may want to set a <a class=link rel="nofollow noreferrer noopener" target=_blank href="https://cs.opensource.google/go/x/tools/+/master:go/packages/packages.go;l=96-117;drc=db8f89b397771c885c6218de3f383d800d72e62a">Deprecated flag</a> to your permission instead of remove it completely from your code. Or, as an alternative, you can put the number manually but it just another pain to handle if you have lots of permission.</p><h2 id=conclusion>Conclusion</h2><p>In this case, Bitmasking is a useful tool to implement access control. You have implemented the access control in only 1 byte because you only need to use <code>uint8</code>. For example, if you use sets of boolean variables to represent the access control, you need more than 1 variable and it will take more than 1 byte to store.</p><p>Thank you for reading!</p></div><div class=separator><span>&#183;</span>
<span>&#183;</span>
<span>&#183;</span></div><h2 class=subtitle>Love This Content?</h2><div class="fg-light support-me">Any kind of supports is greatly appreciated! Kindly support me via <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://www.blockchain.com/btc/address/17Afj6o7xm3ZxQ38adnvSFHSBKhHiCDiev>Bitcoin</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://ko-fi.com/clavinjune>Ko-fi</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://trakteer.id/clavinjune>Trakteer</a>, or just continue to read another content. You can write a response via <a class="fg-bold bottom-red" rel="noreferrer nofollow noopener" href=https://webmention.io/ target=_blank>Webmention</a> and let me know the URL via <a class="fg-bold bottom-red" rel="noreferrer nofollow noopener" href=https://telegraph.p3k.io/send-a-webmention target=_blank>Telegraph</a>.</div><div id=webmentions></div><script defer type=text/javascript src=https://clavinjune.dev/js/webmention.js></script><h2 class=subtitle>Drop Your Comment Below</h2><script defer src=https://giscus.app/client.js data-repo=ClavinJune/ClavinJune.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNTUyMjU5NTU=" data-category=General data-category-id=DIC_kwDOCUCPY84B_g1a data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script></main><script type=text/javascript src=https://clavinjune.dev/js/ga.js defer></script>
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-MTSJ0LHJ06"></script><footer>Copyright &copy; 2022 &#183; Clavin June</footer><script defer type=text/javascript src=https://clavinjune.dev/js/copy.js></script></body></html>