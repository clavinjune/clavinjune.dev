<!doctype html><html lang=en>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatbile content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Clavin June">
<meta http-equiv=content-security-policy content="default-src 'self' 'unsafe-inline' https:; object-src 'none'; style-src 'self' 'unsafe-inline' fonts.googleapis.com github.githubassets.com; font-src fonts.gstatic.com; script-src 'self' 'unsafe-inline' www.googletagmanager.com gist.github.com giscus.app; base-uri 'none'; img-src 'self' images.unsplash.com i.kym-cdn.com iq.opengenus.org;">
<meta name=google-site-verification content="n8iUJq2zr7wQ8eTS_ozpypgZQhfezUeUOXhOr3-INrE">
<meta name=monetization content="$ilp.uphold.com/RYNmdxrFrPJB">
<meta name=description content="Create a log parser using Go and Regex to read and understand the system logs">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="June Personal Web">
<meta property="og:title" content="Create Log Parser Using Go">
<meta property="og:description" content="Create a log parser using Go and Regex to read and understand the system logs">
<meta property="og:type" content="article">
<meta property="og:url" content="https://clavinjune.dev/en/blogs/create-log-parser-using-go/"><meta property="og:image" content="https://images.unsplash.com/photo-1461360228754-6e81c478b882?w=1920&q=50"><meta property="article:section" content="blogs">
<meta property="article:published_time" content="2021-10-21T15:42:38+07:00">
<meta property="article:modified_time" content="2021-10-21T15:42:38+07:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://images.unsplash.com/photo-1461360228754-6e81c478b882?w=1920&q=50">
<meta name=twitter:title content="Create Log Parser Using Go">
<meta name=twitter:description content="Create a log parser using Go and Regex to read and understand the system logs">
<title>June Personal Web - Create Log Parser Using Go</title>
<link rel=stylesheet href="/css/style.min.caf3859664f2f17538a5252c2da2fafd55c3c16af6cf7edc370e96f06f065494.css" integrity="sha256-yvOFlmTy8XU4pSUsLaL6/VXDwWr2z37cNw6W8G8GVJQ=">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto:wght@300;400;700&display=swap">
</noscript>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap">
</noscript>
<link rel=stylesheet href="/css/single.min.4ef907b4b98f286f39f91ee2e1ce94c75078cda0617be84c7d4c05e3639ec7b9.css" integrity="sha256-TvkHtLmPKG85+R7i4c6Ux1B4zaBhe+hMfUwF42Oex7k=">
</head>
<body><nav class=fg-bold>
<a id=skip-to-content href=#content>Skip to content</a>
<ul id=menu><li><a href=https://clavinjune.dev/en/>HOME</a></li><li><a class=active href=https://clavinjune.dev/en/blogs/>BLOG</a></li></ul>
</nav>
<main class=single>
<h1 class=title>Create Log Parser Using Go</h1>
<div class="metadata font-16">
<a class=category href=https://clavinjune.dev/en/categories/tech>tech</a>
<span class=middot>&#183;</span>
<span>Oct 21, 2021</span>
<span class=middot>&#183;</span>
<span>~5 min</span>
</div>
<div id=content>
<figure>
<img srcset="https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=240 240w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=300 300w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=360 360w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=480 480w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=768 768w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=800 800w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=960 960w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1024 1024w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1080 1080w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1200 1200w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1366 1366w,https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1920 1920w" sizes="(max-width: 480px) 480px, 100vw" src="https://images.unsplash.com/photo-1461360228754-6e81c478b882?q=50&w=1920" alt="Photo by @iammrcup on Unsplash" title="Photo by @iammrcup on Unsplash" width=100% height=auto>
<figcaption class=font-16>Photo by <a class="link unsplash-ref" rel="noreferrer nofollow noopener" target=_blank href=https://unsplash.com/@iammrcup>@iammrcup</a> on Unsplash</figcaption>
</figure>
<h2 id=introduction>Introduction</h2>
<p>Log File is a file that contains all events that happened in the system. By simply reading the log file, Developers can understand what happened, who did something to the system, and many more. Some systems have their standard way to write logs like <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://httpd.apache.org/docs/2.4/logs.html>Apache</a>, <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://nginx.org/en/docs/http/ngx_http_log_module.html>Nginx</a>, <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log/usage>Envoy</a>, Etc. But how about the custom one? Of course, developers need to write the log file as descriptive as possible to read it easily.</p>
<p>Perhaps writing logs is not an issue, but reading it? Do developers review and read their logs? Do they can easily understand the logs? Do they know what happened to the system right now? Perhaps not. That&rsquo;s where monitoring apps like <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://www.elastic.co/>Elastic</a> or <a class=link rel="nofollow noreferrer noopener" target=_blank href=https://grafana.com/>Grafana</a> come to help parse and monitor the logs file.</p>
<p>Monitoring apps could help developers read the system logs, creating an alert if something went wrong. But they don&rsquo;t understand what happened to the system. They only follow the rules created by the developers. What if the developers want to put a little <code>brain</code> to the monitoring system so the monitoring apps could understand what happened? Sure by creating a <code>deep learning model</code> to analyze the logs is more than a help. But before that, developers should make sure they can parse the logs.</p>
<p>In this blog post, you will create a simple logs parser using Go as a first step to understand the logs file better.</p>
<h2 id=define-the-log-format>Define the Log Format</h2>
<p>Let&rsquo;s say there&rsquo;s a single line of log formatted like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>[2021-08-27T07:39:54.173Z] &#34;GET /healthz HTTP/1.1&#34; 200 - 0 61 225 - &#34;111.114.195.106,10.0.0.11&#34; &#34;okhttp/3.12.1&#34; &#34;0557b0bd-4c1c-4c7a-ab7f-2120d67bee2f&#34; &#34;example.com&#34; &#34;172.16.0.1:8080&#34;
</code></pre></td></tr></table>
</div>
</div><p>You could extract the data you want from that line, for example:</p>
<ol>
<li>Timestamp</li>
<li>HTTP Method</li>
<li>Request Path</li>
<li>Response Code</li>
<li>IPs</li>
</ol>
<p>Then create the log format according to that line. Let&rsquo;s say you want to name the <code>timestamp</code> as <code>$time_stamp</code>, and the unimportant data as <code>$_</code>. Now you will have a formatted string like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>[$time_stamp] &#34;$http_method $request_path $_&#34; $response_code - $_ $_ $_ - &#34;$ips&#34; &#34;$_&#34; &#34;$_&#34; &#34;$_&#34; &#34;$_&#34;
</code></pre></td></tr></table>
</div>
</div><p>So you can read your logs data like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>  $time_stamp    =&gt; 2021-08-27T07:39:54.173Z
  $http_method   =&gt; GET
  $request_path  =&gt; /healthz
  $response_code =&gt; 200
  $ips           =&gt; 111.114.195.106,10.0.0.11
</code></pre></td></tr></table>
</div>
</div><h2 id=create-the-parser>Create the parser</h2>
<p>Let&rsquo;s create a <code>main.go</code> file with the logs data and the format. To be easily used by the regex, you should escape the special symbol in your format using <code>\</code>.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>...

<span style=color:#00f>func</span> main() {
  logsExample := <span style=color:#a31515>`[2021-08-27T07:39:54.173Z] &#34;GET /healthz HTTP/1.1&#34; 200 - 0 61 225 - &#34;111.114.195.106,10.0.0.11&#34; &#34;okhttp/3.12.1&#34; &#34;0557b0bd-4c1c-4c7a-ab7f-2120d67bee2f&#34; &#34;example.com&#34; &#34;172.16.0.1:8080&#34;`</span>
  logsFormat := <span style=color:#a31515>`\[$time_stamp\] \&#34;$http_method $request_path $_\&#34; $response_code - $_ $_ $_ - \&#34;$ips\&#34; \&#34;$_\&#34; \&#34;$_\&#34; \&#34;$_\&#34; \&#34;$_\&#34;`</span>
}
</code></pre></td></tr></table>
</div>
</div><p>After define the format, adjust your <code>logFormat</code> to a format that regex could read. Because your variable starts with <code>$</code> and only contains <code>alphanumeric</code> and <code>underscore</code>. You can match the variable using this regex <code>\$([\w_]*)</code> then change all of the variables into a <code>named capturing group</code> in regex. Which is <code>(?P&lt;name>re)</code>. Because you want to <code>replace</code> the <code>&lt;name></code> to your defined variable name, you can modify the <code>named capturing group</code> to <code>(?P&lt;$1>.*)</code>. So if you put that in the code, it should be like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>  ...

  regexFormat := regexp.MustCompile(<span style=color:#a31515>`\$([\w_]*)`</span>).ReplaceAllString(logsFormat, <span style=color:#a31515>`(?P&lt;$1&gt;.*)`</span>)

  ...
</code></pre></td></tr></table>
</div>
</div><p>Now your <code>regexFormat</code> looks like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>\[(?P&lt;time_stamp&gt;.*)\] \&#34;(?P&lt;http_method&gt;.*) (?P&lt;request_path&gt;.*) (?P&lt;_&gt;.*)\&#34; (?P&lt;response_code&gt;.*) - (?P&lt;_&gt;.*) (?P&lt;_&gt;.*) (?P&lt;_&gt;.*) - \&#34;(?P&lt;ips&gt;.*)\&#34; \&#34;(?P&lt;_&gt;.*)\&#34; \&#34;(?P&lt;_&gt;.*)\&#34; \&#34;(?P&lt;_&gt;.*)\&#34; \&#34;(?P&lt;_&gt;.*)\&#34;
</code></pre></td></tr></table>
</div>
</div><p>Then compile your <code>regexFormat</code> to find all data in the logs line.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>  ...

  re := regexp.MustCompile(regexFormat)
  matches := re.FindStringSubmatch(logsExample)

  ...
</code></pre></td></tr></table>
</div>
</div><p>Now <code>matches</code> should have all your matched data. Let&rsquo;s print it.</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>  ...

  <span style=color:#00f>for</span> i, k := <span style=color:#00f>range</span> re.SubexpNames() {
    <span style=color:green>// ignore the first and the $_
</span><span style=color:green></span>    <span style=color:#00f>if</span> i == 0 || k == <span style=color:#a31515>&#34;_&#34;</span> {
      <span style=color:#00f>continue</span>
    }

    fmt.Printf(<span style=color:#a31515>&#34;%-15s =&gt; %s\n&#34;</span>, k, matches[i])
  }

  ...
</code></pre></td></tr></table>
</div>
</div><p>The output should be like this:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain>$ go run main.go 
time_stamp      =&gt; 2021-08-27T07:39:54.173Z
http_method     =&gt; GET
request_path    =&gt; /healthz
response_code   =&gt; 200
ips             =&gt; 111.114.195.106,10.0.0.11
</code></pre></td></tr></table>
</div>
</div><p>After parsing a single logs line, you should be able to parse all your logs files. The only thing you need to do is define your logs file format. And then transform it into a human-readable format like the <a class=link rel="nofollow noreferrer noopener" href=#define-the-log-format>previous step</a>.</p>
<p>Here is the complete code:</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#00f>package</span> main

<span style=color:#00f>import</span> (
  <span style=color:#a31515>&#34;fmt&#34;</span>
  <span style=color:#a31515>&#34;regexp&#34;</span>
)

<span style=color:#00f>func</span> main() {
  <span style=color:green>// a line of log
</span><span style=color:green></span>  logsExample := <span style=color:#a31515>`[2021-08-27T07:39:54.173Z] &#34;GET /healthz HTTP/1.1&#34; 200 - 0 61 225 - &#34;111.114.195.106,10.0.0.11&#34; &#34;okhttp/3.12.1&#34; &#34;0557b0bd-4c1c-4c7a-ab7f-2120d67bee2f&#34; &#34;example.com&#34; &#34;172.16.0.1:8080&#34;`</span>

  <span style=color:green>// your defined log format
</span><span style=color:green></span>  logsFormat := <span style=color:#a31515>`\[$time_stamp\] \&#34;$http_method $request_path $_\&#34; $response_code - $_ $_ $_ - \&#34;$ips\&#34; \&#34;$_\&#34; \&#34;$_\&#34; \&#34;$_\&#34; \&#34;$_\&#34;`</span>

  <span style=color:green>// transform all the defined variable into a regex-readable named format
</span><span style=color:green></span>  regexFormat := regexp.MustCompile(<span style=color:#a31515>`\$([\w_]*)`</span>).ReplaceAllString(logsFormat, <span style=color:#a31515>`(?P&lt;$1&gt;.*)`</span>)

  <span style=color:green>// compile the result
</span><span style=color:green></span>  re := regexp.MustCompile(regexFormat)

  <span style=color:green>// find all the matched data from the logsExample
</span><span style=color:green></span>  matches := re.FindStringSubmatch(logsExample)

  <span style=color:#00f>for</span> i, k := <span style=color:#00f>range</span> re.SubexpNames() {
    <span style=color:green>// ignore the first and the $_
</span><span style=color:green></span>    <span style=color:#00f>if</span> i == 0 || k == <span style=color:#a31515>&#34;_&#34;</span> {
      <span style=color:#00f>continue</span>
    }

    <span style=color:green>// print the defined variable
</span><span style=color:green></span>    fmt.Printf(<span style=color:#a31515>&#34;%-15s =&gt; %s\n&#34;</span>, k, matches[i])
  }
}
</code></pre></td></tr></table>
</div>
</div><p>Thank you for reading!</p>
</div>
<div class=separator>
<span>&#183;</span>
<span>&#183;</span>
<span>&#183;</span>
</div>
<h2 class=subtitle>Love This Content?</h2>
<div class="fg-light support-me">Kindly support me via <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://www.blockchain.com/btc/address/17Afj6o7xm3ZxQ38adnvSFHSBKhHiCDiev>Bitcoin</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://ko-fi.com/clavinjune>Ko-fi</a>, <a rel="noreferrer noopener" target=_blank class="fg-bold bottom-red" href=https://trakteer.id/clavinjune>Trakteer</a>, or just continue to read another content. Any kind of supports is greatly appreciated!</div>
<h2 class=subtitle>Drop Your Comment Below</h2>
<script defer src=https://giscus.app/client.js data-repo=ClavinJune/ClavinJune.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNTUyMjU5NTU=" data-category=General data-category-id=DIC_kwDOCUCPY84B_g1a data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script>
</script>
</main>
<script type=text/javascript src=https://clavinjune.dev/js/ga.js defer></script>
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-MTSJ0LHJ06"></script><footer>
Copyright &copy; 2021 &#183; Clavin June
</footer>
<script defer type=text/javascript src=https://clavinjune.dev/js/copy.js></script>
</body>
</html>